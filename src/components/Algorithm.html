<li>
  <div class="form-group form-group-sm">
    <label id="algo_label"
        class="controls label label-default"
        for="algo_select">algorithm</label>
    <select id="algo_select"
        class="btn btn-default"
        bind:value="algorithm"
    >
      {{#if algorithms}}
        {{#each algorithms as al}}
        <option value={{al.key}}>{{al.key}}</option>
        {{/each}}
      {{/if}}
      </select>
  </div>
</li>
<li>
{{#if neighbors}}
{{#if algorithms}}
  {{#each algorithms as al}}
    {{#if al.key === algorithm}}
      <Neighbor neighbors={{ neighbors }} />
    {{/if}}
  {{/each}}
{{/if}}
{{/if}}
</li>
<script>
import { filter } from 'lodash-es'
import Neighbor from './Neighbor.html'

export default {
  oncreate () {
    const initial = this.get('algorithms')[0].key
    this.set({ algorithm: initial })

    this.observe('algorithm', (v) => {
      console.log(`algorithm: [${v}] selected`)
      const a = this.get('algorithms')
      const selected = filter(a, {key: v})[0]
      this.set({ neighbors: selected.neighborhood })
    })
  },

  components: {
    Neighbor
  }
}
</script>