<Detail
  ref:detail
  scaling="{{ scaling }}"/>

<Algorithm
  ref:algorithm
  algorithms="{{ algorithms }}"/>

<Neighbor
  ref:neighborhood
  neighbors="{{ neighbors }}"/>

<Radius
  ref:radius
  radii="{{ radii }}"/>

<State
  ref:state
  states="{{ states }}"/>

<button on:click="selected()">selections</button>

<script>
import settings from './settings.js'
import states from './states.js'

import Detail from './Detail.html'
import Algorithm from './Algorithm.html'
import Neighbor from './Neighbor.html'
import Radius from './Radius.html'
import State from './State.html'

var details = []
for (var i = 1; i <= settings.detail.max; i++) {
  details.push(i)
}

var getSelected = function (select) {
  var selected = ''
  if (select) {
    selected = Array.from(select).find((s) => s.selected).value
    console.log(selected)
  }
  return selected
}

export default {
  data () {
    return {
      scaling: details,
      neighbors: ['moore', 'neumann'],
      radii: [ 1, 2, 3 ],
      states: states
    }
  },

  components: {
    Detail,
    Algorithm,
    Neighbor,
    Radius,
    State
  },

  methods: {
    selected () {
      console.log(this.refs)
      var detail = getSelected(this.refs.detail.refs.detail)
      var algo = getSelected(this.refs.algorithm.refs.algorithm)
      var nb = getSelected(this.refs.neighborhood.refs.neighborhood)
      var radius = getSelected(this.refs.radius.refs.radius)
      var state = getSelected(this.refs.state.refs.state)
      var a = {
        detail,
        algo,
        nb,
        radius,
        state
      }
      console.log(a)
      return a
    }
  }
}
</script>
