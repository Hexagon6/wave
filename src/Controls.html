<style>
ul {
  max-width: 220px;
  list-style: none;
  float: left;
}

li {
  float: right;
  width: 220px;
  padding-bottom: 5px;
}
</style>

<ul>
  <li>
    <Detail
      ref:detail
      scaling="{{ scaling }}"
      on:select="selected()"/>
  </li>
  <li>
    <Algorithm
      ref:algorithm
      algorithms="{{ algorithms }}"
      on:select="selected()"/>
  </li>
  <li>
    <Neighbor
      ref:neighborhood
      neighbors="{{ neighbors }}"
      on:select="selected()"/>
  </li>
  <li>
    <Radius
      ref:radius
      radii="{{ radii }}"
      on:select="selected()"/>
  </li>
  <li>
    <State
      ref:state
      states="{{ states }}"
      on:select="selected()"/>
  </li>
</ul>
<script>
import settings from './settings.js'
import states from './states.js'

import Detail from './Detail.html'
import Algorithm from './Algorithm.html'
import Neighbor from './Neighbor.html'
import Radius from './Radius.html'
import State from './State.html'

var details = []
for (var i = 1; i <= settings.detail.max; i++) {
  details.push(i)
}

export default {
  data () {
    return {
      scaling: details,
      neighbors: ['moore', 'neumann'],
      radii: [ 1, 2, 3 ],
      states: states
    }
  },

  components: {
    Detail,
    Algorithm,
    Neighbor,
    Radius,
    State
  },

  methods: {
    selected () {
      var s = {}
      Array
      .from([ 'detail', 'algorithm', 'neighborhood', 'radius', 'state' ])
      .map((name) => {
        if (this.refs[name].refs[name]) {
          var selected = Array.from(this.refs[name].refs[name]).find((s) => s.selected)
          s[name] = (selected) ? selected.value : ''
        }
      })
      return s
    }
  }
}
</script>
