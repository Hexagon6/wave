<Detail scaling="{{ scaling }}"/>

<div class="form-group form-group-sm">
    <label id="algo_label" 
        class="controls label label-default"
        for="algo_select">algorithm</label>
    <select id="algo_select" 
        class="btn btn-default" 
        type="list" 
        list="detail_list"
        bind:value='selected_algo'
        ref:algorithm
    >
    {{#each algorithms as algo}}
    <option>{{algo.key}}</option>
    {{/each}}
    </select>
</div>

<div class="form-group form-group-sm">
    <label id="state_label"
        class="controls label label-default"
        for="nb_select">neighborhood</label>
    <select id="nb_select"
        class="btn btn-default"
        type="list"
        list="nb"
        bind:value='selected_nb'
    >
{{#if selected_algo}}
    {{#each algorithms as algo}}
        {{#if algo.key == selected_algo}}
        {{#each algo.neighborhood as nb}}
        <option>{{nb.type}}</option>
        {{/each}}
        {{/if}}
    {{/each}}
{{/if}}
    </select>
</div>

<div class="form-group form-group-sm">
    <label id="nb_r_label"
        class="controls label label-default"
        for="nb_r_select">radius</label>
    <select
        id="nb_r_select"
        class="btn btn-default"
        type="list"
        list="neighborhood_r_list"
    >
{{#if selected_nb}}
    {{#each algorithms as algo}}
        {{#if algo.key == selected_algo}}
        {{#each algo.neighborhood as nb}}
            {{#if nb.type == selected_nb}}
            {{#each nb.radius as radius}}
            <option>{{radius}}</option>
            {{/each}}
            {{/if}}
        {{/each}}
        {{/if}}
    {{/each}}
{{/if}}
    </select>
</div>

<div class="form-group form-group-sm">
    <label
        id="state_label"
        class="controls label label-default"
        for="state_select"
    >states</label>
    <select
        id="state_select"
        class="btn btn-default"
        type="list"
        list="state"
    >
{{#if algorithms}}
    {{#each algorithms as algo}}
    <option>{{settings.state}}</option>
    {{/each}}
{{/if}}
    </select>
</div>

<script>
    import settings from './settings.js';
    import Detail from './Detail.html';

    console.log(_.range(1,3));

    var details = [];
    for (var i = 1; i <= settings.detail.max; i++){
        details.push(i);
    }

    export default {
        data () {
            return {
                scaling: details
            }
        },

        onrender() {
            const options = this.refs.algorithm.children;
            let algorithm = 0;
            for (var option in options) {
                if(options[option].selected){
                    algorithm = options[option].value;
                }
            }
            this.set({ algorithm: algorithm });
        },

        components: {
            Detail
        }
    };
</script>
